```
前两次Lecture讨论了DBMS如何将数据库以文件形式保存在磁盘上
但磁盘上的数据最终必须要进入内存才能被DBMS软件所使用.
而BufferPool，便可以看作是磁盘页在内存中的管理器,
负责处理页面在磁盘和内存中来回的移动
```

# 1.缓冲池优化
## 1.1 多缓冲池
多缓冲池是指在DBMS中有多个独立服务的缓冲池实例，一般来说可以通过如下方式来区分：
- **每个数据库一个缓冲池**
- **每种页类型一个缓冲池**

## 1.2 预取
预取是指DBMS在需要访问某个页面时，会一次性将这个页面以及其周围的页面一并加载到缓冲池中，从而减少后续访问的等待时间。

## 1.3 扫描共享
当有多个查询需要执行相同的页面扫描，可以让这多个查询共享这次扫描，多个查询附着在一个表扫描的游标上，而不是进行多次独立的IO读取。

## 1.4 缓冲池旁通
缓冲池旁通是指当DBMS需要访问一个页面时，如果这个页面不在缓冲池中，并且缓冲池已经满了，那么DBMS可以直接从磁盘读取这个页面，而不需要将缓冲池中的某个页面移出。

# 2.替换策略
## 2.1 LRU
LRU（Least Recently Used）是一种常见的替换策略，其基本思想是优先替换那些最近最少使用的页面。
LRU的实现方式有两种：
- **链表+哈希表**：链表用于维护页面的使用顺序，哈希表用于快速查找页面是否在链表中。
- **链表+数组**：一个链表用于维护页面的使用顺序，一个数组用于维护页面的空闲状态。

## 2.2 时钟算法
时钟算法是一种基于LRU的替换策略，其基本思想是优先替换那些最近最少使用的页面，同时通过一个指针来标记最近访问的页面，从而减少查找的时间复杂度。

## 2.3 LRU-K
LRU-K是一种改进的LRU算法，其基本思想是优先替换那些最近最少使用的页面，同时通过一个计数器来记录每个页面的访问次数，从而减少查找的时间复杂度。
LRU-K记录了数据最后K次被访问的时间戳，这样你会得到一系列时间间隔，此时便可以一定程度上断定该数据的访问模式，这样我们的评判指标中就有了一个该数据未来多久可能会被访问。

## 2.4 优先级提示
DBMS的上层比缓冲池层对数据的存储模式更为了解，比如当访问一个B+树索引时，上层更知道未来将会访问哪些页面，上层可以将这些知识下推给缓冲池层，以让它做出更好的决策。

## 2.5 脏页
- **非脏页**： 剔除非脏页时，你不用做任何额外的磁盘写，直接扔就行，所以很快
- **脏页**： 剔除脏页时需要考虑将该脏页写入磁盘，所以较慢

## 2.6其他内存池
  排序 + Join Buffer
  查询缓存
  Maintenance Buffer
  日志Buffer
  目录缓存




